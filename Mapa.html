<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Mapa - Lago Rapel</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <style>
    body { margin: 0; }
    #map { width: 100%; height: 100vh; }
  </style>
</head>
<body>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet-omnivore@0.3.4/leaflet-omnivore.min.js"></script>
  <script>
    var map = L.map('map').setView([-34.2, -71.4], 11);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 18,
      attribution: 'Â© OpenStreetMap'
    }).addTo(map);

    var kmlLayer;
    function cargarTerritorio(kmlFile) {
      if (kmlLayer) map.removeLayer(kmlLayer);
      kmlLayer = omnivore.kml(kmlFile)
        .on('ready', function() {
          this.eachLayer(function(layer) {
            if(layer.setStyle) layer.setStyle({ color:'#ff0000', weight:2, fillColor:'#ffaaaa', fillOpacity:0.5 });
            var props = layer.feature.properties || {};
            layer.bindPopup('<b>' + (props.name||'Territorio') + '</b><br>' + (props.description||''));
          });
          map.fitBounds(this.getBounds());
        })
        .addTo(map);
    }

    // Ejemplo: cargar un territorio por defecto al abrir
    // cargarTerritorio('territorios/LagorapelKml.kml');
  </script>
</body>
</html>
